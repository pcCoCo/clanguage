# 章节11-文件IO

## 文件概念

## 打开文件

## FILE结构体剖析



## 标准输入输出

属于C标准库预定义的三个标准文件流

标准输入 stdin
标准输出 stdout
标准错误 stderr

定义形式

      #include <stdio.h>
      extern FILE *stdin;
      extern FILE *stdout;
      extern FILE *stderr;


执行一个shell命令 创建一个进程时通常会自动打开三个标准文件，即标准输入文件（stdin），默认对应终端的键盘；标准输出文件（stdout）和标准错误输出文件（stderr），这两个文件默认都对应终端的屏幕。进程将从标准输入文件中得到输入数据，将正常输出数据输出到标准输出文件，而将错误信息送到标准错误文件中。

C库提供的标准I/O函数，这些函数操作的是文件描述符，是标准输入流、输出流或者错误流，而不是键盘的设备文件<一种标准输入设备>和显示器的设备文件<一种标准输出设别>。如果改变了标准输出流和显示器设备文件之间的对应关系，那么可能结果就不会在显示器上。这种情况出现在命令行中使用重定向符号的时候，标准输入、标准输出和标准错误对应的就不是键盘设备文件和显示器设备文件，而是指定的某个普通的文件。

在默认情况下，stdout是行缓冲的，他的输出会放在输出缓冲区里面，只有到换行的时候，才会输出到输出设备中。而stderr是无缓冲的，会直接输出到输出设备中。

标准流在调用 exit(3) 和程序正常中止时被关闭。

## 关闭文件

fclose()函数原型

```
int fclose ( FILE * stream );
```
函数功能 关闭stream所标识的(打开的)文件。



### 自己打开的文件含着泪也要关闭

为什么？



## 读写文件



a

a

a

a

a

a

a

a

a

a

a

a

结束



